function e(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(t,n,a){e(t,n),n.set(t,a)}var n=new WeakMap,a=new WeakMap;class l{async getMovies(e=this.page){try{return await fetch(`${this.BASE_URL}trending/movie/day${this.API_KEY}&page=${e}`).then((e=>e.json()))}catch(e){console.log(e)}}getSearchMovie(e,t){try{return fetch(`${this.BASE_URL}search/movie${this.API_KEY}&query=${e}&page=${t}`).then((e=>e.json()))}catch(e){console.log(e)}}async getGanres(){try{return await fetch(`${this.BASE_URL}genre/movie/list${this.API_KEY}`).then((e=>e.json()))}catch(e){console.log(e)}}resetPage(){this.page=1}constructor(){t(this,n,{writable:!0,value:"https://api.themoviedb.org/3/"}),t(this,a,{writable:!0,value:"?api_key=7a4cd4317772102a9b88ef6a54b71590"}),this.page=1,this.BASE_URL="https://api.themoviedb.org/3/",this.API_KEY="?api_key=7a4cd4317772102a9b88ef6a54b71590"}}let i;function s(e){let t=[];e.forEach((e=>{let n=i.find((t=>t.id===e));t.push(n)}));const n=t.map((e=>e.name));let a=[];return n.map((e=>{e.length>10&&(e=e.slice(0,8)+"..."),a.push(e)})),a}(new l).getGanres().then((e=>{i=e.genres}));const o=document.querySelector(".addToWatch"),r=document.querySelector(".addToQueue");let c="addToWatch",d=[],m=[],u=[];u.push(JSON.parse(localStorage.getItem(c)));function g(e){elementFilmModal=e,u.map((e=>{e.map((e=>{e.title===elementFilmModal.title?o.textContent="Added":o.textContent="add to Watched"}))})),o.addEventListener("click",(function(e){(0===localStorage.length||0!==localStorage.length&!d.includes(elementFilmModal))&&(d.push(elementFilmModal),localStorage.setItem(c,JSON.stringify(d)))})),r.addEventListener("click",(function(e){if(m.includes(elementFilmModal))return;m.push(elementFilmModal),localStorage.setItem("addToQueue",JSON.stringify(m))}))}const h=document.querySelector(".gallery-container"),p=document.querySelector(".backdrop"),_=document.querySelector("[data-modal]"),f=document.querySelector("[data-modal-close]"),v=document.querySelector(".modal-block");function y({results:e}){const t=[...e];f.addEventListener("click",(function(e){e.currentTarget===e.target&&_.classList.add("is-hidden")})),h.addEventListener("click",(function(e){_.classList.remove("is-hidden"),t.map((t=>{if(t.original_title===e.target.alt){g(t);let e=s(t.genre_ids);e=e.length>2?e.slice(0,2).join(", ")+", Other":e.join(", ");const n=`\n      <div class="modal-films">\n        <img\n          class="modal-pictures"\n          src="${`https://image.tmdb.org/t/p/w500${t.poster_path}`}"\n          alt="${t.original_title}"\n          width="375px"\n        />\n      </div>\n      <div class="modal-info">\n        <h2 class="modal-title">${t.original_title}</h2>\n        <table class="modal-info__film">\n          <tr>\n            <td class="modal-info__left">Vote / Votes</td>\n            <td class="modal-info__right">\n              <span class="modal-span">${t.vote_average}</span>/${t.vote_count}\n            </td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Popularity</td>\n            <td class="modal-info__right">${t.popularity}</td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Original Title</td>\n            <td class="modal-info__right">${t.original_title}</td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Genre</td>\n            <td class="modal-info__right">${e}</td>\n          </tr>\n        </table>\n\n        <div class="modal-bottom">\n          <h2 class="modal-bottom__title">About</h2>\n          <p class="modal-bottom__text">\n            ${t.overview}\n          </p>\n        </div>\n        \n      </div>\n    `;return v.innerHTML="",v.insertAdjacentHTML("afterbegin",n)}}))})),p.addEventListener("click",(function(e){e.currentTarget===e.target&&_.classList.add("is-hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&_.classList.add("is-hidden")}))}new l;const b=document.querySelector(".gallery-container");function $({results:e}){b.innerHTML="",y({results:e});const t=e.map((({poster_path:e,title:t,release_date:n,vote_average:a,genre_ids:l})=>{let i=`https://image.tmdb.org/t/p/w500${e}`,o=`${t}`;const r=`${n.slice(0,4)}`;let c=s(l);return e||(i="https://i.ibb.co/JyBCdzw/sinema-empty.jpg"),o.length>25&&(o=o.slice(0,30)+"..."),c=c.length>2?c.slice(0,2).join(", ")+", Other":c.join(", "),`<li class="gallery-box">\n    <div class="gallery-card">\n      <img\n        class="gallery-img"\n        src="${i}"\n        alt="${o}"\n        loading="lazy"\n      />\n    </div>\n    <h1 class="gallery-title">${o}</h1>\n    <div class="gallery-info">\n      <p class="gallery-ganre">${c}</p>\n      <p class="gallery-year">${r}</p>\n      <p class="gallery-average">${a}</p>\n    </div>\n  </li>\n      `})).join("");b.insertAdjacentHTML("beforeend",t)}const S=document.querySelector(".libruary-conteiner"),L=document.querySelector(".backdrop"),w=document.querySelector("[data-modal]"),E=document.querySelector("[data-modal-close]"),q=document.querySelector(".modal-block");function T(e){const t=[...e];E.addEventListener("click",(function(e){e.currentTarget===e.target&&w.classList.add("is-hidden")})),S.addEventListener("click",(function(e){w.classList.remove("is-hidden"),t.map((t=>{if(t.original_title===e.target.alt){g(t);let e=s(t.genre_ids);e=e.length>2?e.slice(0,2).join(", ")+", Other":e.join(", ");const n=`\n      <div class="modal-films">\n        <img\n          class="modal-pictures"\n          src="${`https://image.tmdb.org/t/p/w500${t.poster_path}`}"\n          alt="${t.original_title}"\n          width="375px"\n        />\n      </div>\n      <div class="modal-info">\n        <h2 class="modal-title">${t.original_title}</h2>\n        <table class="modal-info__film">\n          <tr>\n            <td class="modal-info__left">Vote / Votes</td>\n            <td class="modal-info__right">\n              <span class="modal-span">${t.vote_average}</span>/${t.vote_count}\n            </td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Popularity</td>\n            <td class="modal-info__right">${t.popularity}</td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Original Title</td>\n            <td class="modal-info__right">${t.original_title}</td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Genre</td>\n            <td class="modal-info__right">${e}</td>\n          </tr>\n        </table>\n\n        <div class="modal-bottom">\n          <h2 class="modal-bottom__title">About</h2>\n          <p class="modal-bottom__text">\n            ${t.overview}\n          </p>\n        </div>\n        \n      </div>\n    `;return q.innerHTML="",q.insertAdjacentHTML("afterbegin",n)}}))})),L.addEventListener("click",(function(e){e.currentTarget===e.target&&w.classList.add("is-hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&w.classList.add("is-hidden")}))}const k=document.querySelector(".libruary-conteiner");function M(e){k.innerHTML="",T(e);const t=e.map((({poster_path:e,title:t,release_date:n,vote_average:a,genre_ids:l})=>{let i=`https://image.tmdb.org/t/p/w500${e}`,s=`${t}`;const o=`${n.slice(0,4)}`;let r=l;return e||(i="https://i.ibb.co/JyBCdzw/sinema-empty.jpg"),s.length>25&&(s=s.slice(0,30)+"..."),`<li class="gallery-box">\n      <div class="gallery-card">\n        <img\n         class="gallery-img"\n          src="${i}"\n         alt="${s}"\n          loading="lazy"\n       />\n     </div>\n     <h1 class="gallery-title">${s}</h1>\n     <div class="gallery-info">\n        <p class="gallery-ganre">${r}</p>\n       <p class="gallery-year">${o}</p>\n        <p class="gallery-average">${a}</p>\n      </div>\n    </li>\n        `})).join("");k.insertAdjacentHTML("beforeend",t)}let A="addToWatch";const j=document.querySelector(".header__form-search"),O=(document.querySelector(".gallery-container"),document.querySelector(".btn-home"));document.querySelector(".btn-libryary");if(O.classList.contains("current")){j.addEventListener("submit",(function(l){l.preventDefault();const{elements:{search:i}}=l.currentTarget;if(e=i.value,""===e)return void n.classList.remove("hiden");n.classList.add("hiden");a.getSearchMovie(e,t).then((e=>{$(e),t+=1}))}));document.querySelector(".pagination-container");let e="",t=1;const n=document.querySelector(".text-empty");n.classList.add("hiden"),n.textContent="Search result not successful. Enter the correct movie name...";const a=new l;e="red",a.getSearchMovie(e,t).then((e=>{$(e)}))}else!function(){let e=[];e=JSON.parse(localStorage.getItem(A)),M(e);const t=document.querySelector(".btn-Watched");t.classList.add("active"),t.addEventListener("click",(function(a){e=JSON.parse(localStorage.getItem(A)),M(e),t.setAttribute("disabled",!0),n.removeAttribute("disabled"),t.classList.add("active"),n.classList.remove("active")}));const n=document.querySelector(".btn-Queue");n.addEventListener("click",(function(e){storageJsonQueue=JSON.parse(localStorage.getItem("addToQueue")),M(storageJsonQueue),n.setAttribute("disabled",!0),t.removeAttribute("disabled"),t.classList.remove("active"),n.classList.add("active")}))}();
//# sourceMappingURL=index.aa64cdfc.js.map
